{"ast":null,"code":"import Card from '../../middleware/models/card';\n\nrequire('../../middleware/db/mongoose');\n\nexport default (async (request, response) => {\n  const _id = request.body._id;\n  const updates = Object.keys(request.body);\n  const allowedUpdates = ['_id', 'cardTitle', 'note', 'isCardCompleted', 'isArchived', 'dueDate'];\n  const isValidOperation = updates.every(update => {\n    return allowedUpdates.includes(update);\n  });\n\n  if (!isValidOperation) {\n    return response.status(400).send({\n      error: 'Invalid card updates!'\n    });\n  }\n\n  try {\n    const newCard = await Card.findOne({\n      _id\n    });\n\n    if (!newCard) {\n      return response.status(404).send({\n        error: 'Failed to find a card'\n      });\n    }\n\n    updates.forEach(update => newCard[update] = request.body[update]);\n    await newCard.save();\n    return response.status(200).json({\n      success: true\n    });\n  } catch (e) {\n    return response.status(500).json({\n      success: false,\n      message: 'failed to update a card '\n    });\n  }\n});","map":null,"metadata":{},"sourceType":"module"}