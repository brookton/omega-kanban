{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport Main from '../../components/main';\nimport IndexPage from '../../components/index-page';\nimport { SnackbarProvider } from 'notistack';\nimport { useRouter } from 'next/router';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nexport default function Index() {\n  var _useState = useState(false),\n      isValid = _useState[0],\n      setIsValid = _useState[1];\n\n  var _useState2 = useState(''),\n      message = _useState2[0],\n      setMessage = _useState2[1];\n\n  var router = useRouter();\n  var _router$query = router.query,\n      _id = _router$query._id,\n      project = _router$query.project;\n  useEffect(function () {\n    if (_id) getRouter(_id);\n  }, [_id]);\n\n  var getRouter = function getRouter(_id) {\n    fetch(\"/api/get-router\", {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        _id: _id\n      })\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      if (data.success) {\n        setIsValid(true);\n      } else {\n        setTimeout(function () {\n          router.replace('/');\n        }, 500);\n        setMessage('URL is not valid.');\n      }\n    })[\"catch\"](function (err) {\n      console.error(\"Something wrong happened while getting a route:\".concat(err.message));\n    });\n  };\n\n  return __jsx(SnackbarProvider, {\n    maxSnack: 3\n  }, __jsx(IndexPage, null), isValid ? _id && project ? __jsx(Main, {\n    _id: _id,\n    projectName: project\n  }) : __jsx(\"div\", {\n    style: {\n      backgroundColor: 'rgb(95, 188, 190)',\n      width: '100%',\n      height: '100vh',\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      justifyContent: 'center'\n    }\n  }, __jsx(CircularProgress, null)) : __jsx(\"div\", {\n    style: {\n      backgroundColor: 'rgb(95, 188, 190)',\n      width: '100%',\n      height: '100vh',\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      justifyContent: 'center'\n    }\n  }, __jsx(\"div\", null, message)));\n}","map":null,"metadata":{},"sourceType":"module"}