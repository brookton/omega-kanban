{"ast":null,"code":"import Checklist from '../../middleware/models/checklist';\n\nrequire('../../middleware/db/mongoose');\n\nexport default (async (request, response) => {\n  const {\n    _id\n  } = request.body;\n  const updates = Object.keys(request.body);\n  const allowedUpdates = ['_id', 'checklist', 'isChecked'];\n  const isValidOperation = updates.every(update => {\n    return allowedUpdates.includes(update);\n  });\n\n  if (!isValidOperation) {\n    return response.status(400).send({\n      error: 'Invalid checklist updates!'\n    });\n  }\n\n  try {\n    const newChecklist = await Checklist.findOne({\n      _id\n    });\n\n    if (!newChecklist) {\n      return response.status(404).send({\n        error: 'Failed to find a checklist'\n      });\n    }\n\n    updates.forEach(update => newChecklist[update] = request.body[update]);\n    await newChecklist.save();\n    return response.status(200).json({\n      success: true\n    });\n  } catch (e) {\n    return response.status(500).json({\n      success: false,\n      message: 'failed to update a checklist'\n    });\n  }\n});","map":null,"metadata":{},"sourceType":"module"}